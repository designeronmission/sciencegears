<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Gallery</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <style>
        body {
    background-color: #f8f9fa;
}

.video-card {
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    height: 100%;
}

.video-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
}

.video-thumbnail {
    position: relative;
    overflow: hidden;
    border-radius: 8px 8px 0 0;
}

.video-thumbnail img {
    width: 100%;
    height: 180px;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.video-card:hover .video-thumbnail img {
    transform: scale(1.05);
}

.play-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 50px;
    height: 50px;
    background-color: rgba(255, 255, 255, 0.8);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
}

.video-thumbnail:hover .play-icon {
    opacity: 1;
}

.play-icon i {
    color: #0d6efd;
    font-size: 1.5rem;
    margin-left: 3px;
}

.video-info {
    padding: 1rem;
    background-color: white;
    border-radius: 0 0 8px 8px;
}

.video-title {
    font-weight: 600;
    margin-bottom: 0.5rem;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.video-meta {
    display: flex;
    justify-content: space-between;
    color: #6c757d;
    font-size: 0.9rem;
}

.badge {
    font-weight: 500;
}

#videoModal .modal-body {
    background-color: #000;
}

#videoModal iframe {
    border: none;
}

@media (max-width: 767.98px) {
    .video-thumbnail img {
        height: 150px;
    }
}

@media (max-width: 575.98px) {
    .video-thumbnail img {
        height: 120px;
    }
}
    </style>>
</head>
<body>
    <header class="bg-dark text-white py-4">
        <div class="container">
            <h1 class="text-center mb-0">Video Gallery</h1>
        </div>
    </header>

    <main class="container my-5">
        <div class="row mb-4">
            <div class="col-md-6 mb-3 mb-md-0">
                <div class="input-group">
                    <input type="text" id="searchInput" class="form-control" placeholder="Search videos...">
                    <button class="btn btn-primary" id="searchBtn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
            <div class="col-md-3 mb-3 mb-md-0">
                <select id="filterCategory" class="form-select">
                    <option value="">All Categories</option>
                    <option value="nature">Nature</option>
                    <option value="technology">Technology</option>
                    <option value="travel">Travel</option>
                    <option value="food">Food</option>
                    <option value="music">Music</option>
                </select>
            </div>
            <div class="col-md-3">
                <select id="sortVideos" class="form-select">
                    <option value="newest">Newest First</option>
                    <option value="oldest">Oldest First</option>
                    <option value="views">Most Views</option>
                    <option value="likes">Most Likes</option>
                    <option value="title">Title (A-Z)</option>
                </select>
            </div>
        </div>

        <div id="videoContainer" class="row g-4">
            <!-- Videos will be loaded here -->
        </div>

        <div id="loadingIndicator" class="text-center my-5 d-none">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-2">Loading more videos...</p>
        </div>

        <div id="noResults" class="text-center py-5 d-none">
            <i class="fas fa-video-slash fa-3x mb-3 text-muted"></i>
            <h3 class="text-muted">No videos found</h3>
            <p class="text-muted">Try adjusting your search or filter criteria</p>
        </div>
    </main>

    <!-- Video Modal -->
    <div class="modal fade" id="videoModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="videoModalTitle">Video Title</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-0 ratio ratio-16x9">
                    <iframe id="videoModalFrame" src="" allowfullscreen></iframe>
                </div>
                <div class="modal-footer">
                    <div class="me-auto">
                        <span class="badge bg-primary" id="videoModalCategory"></span>
                    </div>
                    <div>
                        <span class="me-3"><i class="fas fa-eye me-1"></i> <span id="videoModalViews">0</span></span>
                        <span><i class="fas fa-thumbs-up me-1"></i> <span id="videoModalLikes">0</span></span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
    // Sample video data
    const videos = [
        {
            id: 'dQw4w9WgXcQ',
            title: 'Amazing Nature Scenes',
            category: 'nature',
            views: 1250000,
            likes: 85000,
            date: '2023-05-15',
            thumbnail: 'https://i.ytimg.com/vi/dQw4w9WgXcQ/hqdefault.jpg'
        },
        {
            id: '9bZkp7q19f0',
            title: 'Latest Tech Gadgets 2023',
            category: 'technology',
            views: 890000,
            likes: 45000,
            date: '2023-06-20',
            thumbnail: 'https://i.ytimg.com/vi/9bZkp7q19f0/hqdefault.jpg'
        },
        {
            id: 'kJQP7kiw5Fk',
            title: 'Beautiful Travel Destinations',
            category: 'travel',
            views: 3200000,
            likes: 210000,
            date: '2023-04-10',
            thumbnail: 'https://i.ytimg.com/vi/kJQP7kiw5Fk/hqdefault.jpg'
        },
        {
            id: 'JGwWNGJdvx8',
            title: 'Delicious Food Recipes',
            category: 'food',
            views: 750000,
            likes: 38000,
            date: '2023-07-05',
            thumbnail: 'https://i.ytimg.com/vi/JGwWNGJdvx8/hqdefault.jpg'
        },
        {
            id: 'RgKAFK5djSk',
            title: 'Popular Music Hits',
            category: 'music',
            views: 4500000,
            likes: 320000,
            date: '2023-03-12',
            thumbnail: 'https://i.ytimg.com/vi/RgKAFK5djSk/hqdefault.jpg'
        },
        {
            id: 'fJ9rUzIMcZQ',
            title: 'Wildlife Documentary',
            category: 'nature',
            views: 1100000,
            likes: 67000,
            date: '2023-06-30',
            thumbnail: 'https://i.ytimg.com/vi/fJ9rUzIMcZQ/hqdefault.jpg'
        },
        {
            id: 'OPf0YbXqDm0',
            title: 'Programming Tutorial',
            category: 'technology',
            views: 520000,
            likes: 29000,
            date: '2023-07-18',
            thumbnail: 'https://i.ytimg.com/vi/OPf0YbXqDm0/hqdefault.jpg'
        },
        {
            id: 'JGwWNGJdvx9',
            title: 'Italian Cooking Masterclass',
            category: 'food',
            views: 680000,
            likes: 42000,
            date: '2023-05-22',
            thumbnail: 'https://i.ytimg.com/vi/JGwWNGJdvx8/hqdefault.jpg'
        }
    ];

    // DOM elements
    const videoContainer = document.getElementById('videoContainer');
    const searchInput = document.getElementById('searchInput');
    const searchBtn = document.getElementById('searchBtn');
    const filterCategory = document.getElementById('filterCategory');
    const sortVideos = document.getElementById('sortVideos');
    const loadingIndicator = document.getElementById('loadingIndicator');
    const noResults = document.getElementById('noResults');
    const videoModal = new bootstrap.Modal(document.getElementById('videoModal'));
    const videoModalTitle = document.getElementById('videoModalTitle');
    const videoModalFrame = document.getElementById('videoModalFrame');
    const videoModalCategory = document.getElementById('videoModalCategory');
    const videoModalViews = document.getElementById('videoModalViews');
    const videoModalLikes = document.getElementById('videoModalLikes');

    // Variables for lazy loading
    let currentPage = 1;
    const videosPerPage = 4;
    let isLoading = false;
    let allVideosLoaded = false;
    let filteredVideos = [];

    // Initialize the page
    function init() {
        filteredVideos = [...videos];
        renderVideos();
        setupEventListeners();
    }

    // Set up event listeners
    function setupEventListeners() {
        searchBtn.addEventListener('click', handleSearch);
        searchInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') handleSearch();
        });
        
        filterCategory.addEventListener('change', function() {
            currentPage = 1;
            allVideosLoaded = false;
            filterAndSortVideos();
        });
        
        sortVideos.addEventListener('change', function() {
            currentPage = 1;
            allVideosLoaded = false;
            filterAndSortVideos();
        });
        
        // Lazy loading with intersection observer
        const observer = new IntersectionObserver((entries) => {
            if (entries[0].isIntersecting && !isLoading && !allVideosLoaded) {
                loadMoreVideos();
            }
        }, { threshold: 0.1 });
        
        observer.observe(loadingIndicator);
        
        // Handle window resize for responsive adjustments
        window.addEventListener('resize', debounce(() => {
            // You could add responsive adjustments here if needed
        }, 200));
    }

    // Handle search functionality
    function handleSearch() {
        currentPage = 1;
        allVideosLoaded = false;
        filterAndSortVideos();
    }

    // Filter and sort videos based on current criteria
    function filterAndSortVideos() {
        const searchTerm = searchInput.value.toLowerCase();
        const categoryFilter = filterCategory.value;
        
        // Filter videos
        filteredVideos = videos.filter(video => {
            const matchesSearch = video.title.toLowerCase().includes(searchTerm);
            const matchesCategory = !categoryFilter || video.category === categoryFilter;
            return matchesSearch && matchesCategory;
        });
        
        // Sort videos
        const sortBy = sortVideos.value;
        switch(sortBy) {
            case 'newest':
                filteredVideos.sort((a, b) => new Date(b.date) - new Date(a.date));
                break;
            case 'oldest':
                filteredVideos.sort((a, b) => new Date(a.date) - new Date(b.date));
                break;
            case 'views':
                filteredVideos.sort((a, b) => b.views - a.views);
                break;
            case 'likes':
                filteredVideos.sort((a, b) => b.likes - a.likes);
                break;
            case 'title':
                filteredVideos.sort((a, b) => a.title.localeCompare(b.title));
                break;
        }
        
        // Clear current videos and render
        videoContainer.innerHTML = '';
        renderVideos();
    }

    // Render videos with lazy loading
    function renderVideos() {
        if (filteredVideos.length === 0) {
            noResults.classList.remove('d-none');
            loadingIndicator.classList.add('d-none');
            return;
        } else {
            noResults.classList.add('d-none');
        }
        
        const startIndex = 0;
        const endIndex = Math.min(currentPage * videosPerPage, filteredVideos.length);
        const videosToShow = filteredVideos.slice(startIndex, endIndex);
        
        videosToShow.forEach(video => {
            const videoCard = createVideoCard(video);
            videoContainer.appendChild(videoCard);
        });
        
        // Hide loading indicator if all videos are loaded
        if (endIndex >= filteredVideos.length) {
            allVideosLoaded = true;
            loadingIndicator.classList.add('d-none');
        } else {
            loadingIndicator.classList.remove('d-none');
        }
    }

    // Load more videos for lazy loading
    function loadMoreVideos() {
        if (isLoading || allVideosLoaded) return;
        
        isLoading = true;
        loadingIndicator.classList.remove('d-none');
        
        // Simulate loading delay
        setTimeout(() => {
            currentPage++;
            renderVideos();
            isLoading = false;
        }, 800);
    }

    // Create a video card element
    function createVideoCard(video) {
        const col = document.createElement('div');
        col.className = 'col-12 col-sm-6 col-lg-4 col-xl-3';
        
        const card = document.createElement('div');
        card.className = 'video-card card h-100';
        
        const thumbnail = document.createElement('div');
        thumbnail.className = 'video-thumbnail position-relative';
        thumbnail.innerHTML = `
            <img src="${video.thumbnail}" alt="${video.title}" class="w-100">
            <div class="play-icon">
                <i class="fas fa-play"></i>
            </div>
        `;
        
        thumbnail.addEventListener('click', () => openVideoModal(video));
        
        const info = document.createElement('div');
        info.className = 'video-info';
        info.innerHTML = `
            <h3 class="video-title">${video.title}</h3>
            <div class="video-meta">
                <span><i class="fas fa-eye me-1"></i> ${formatNumber(video.views)}</span>
                <span><i class="fas fa-thumbs-up me-1"></i> ${formatNumber(video.likes)}</span>
                <span class="badge bg-primary">${video.category}</span>
            </div>
        `;
        
        card.appendChild(thumbnail);
        card.appendChild(info);
        col.appendChild(card);
        
        return col;
    }

    // Open video modal
    function openVideoModal(video) {
        videoModalTitle.textContent = video.title;
        videoModalFrame.src = `https://www.youtube.com/embed/${video.id}?autoplay=1`;
        videoModalCategory.textContent = video.category;
        videoModalViews.textContent = formatNumber(video.views);
        videoModalLikes.textContent = formatNumber(video.likes);
        videoModal.show();
    }

    // Close video modal and stop video playback
    document.getElementById('videoModal').addEventListener('hidden.bs.modal', function() {
        videoModalFrame.src = '';
    });

    // Helper function to format large numbers
    function formatNumber(num) {
        if (num >= 1000000) {
            return (num / 1000000).toFixed(1) + 'M';
        } else if (num >= 1000) {
            return (num / 1000).toFixed(1) + 'K';
        }
        return num.toString();
    }

    // Debounce function for performance
    function debounce(func, wait) {
        let timeout;
        return function() {
            const context = this, args = arguments;
            clearTimeout(timeout);
            timeout = setTimeout(() => func.apply(context, args), wait);
        };
    }

    // Initialize the application
    init();
});
    </script>
</body>
</html>